<div class="wrapper wappen-wrapper">
  <div class="toolbar">
      <button class="helpbutton" (click)="displayHelp()"><img src="assets/icons/help.svg"></button>
      <button [className]="saveBtnActive ? 'savebutton active' : 'savebutton'" (click)="saveCoa()">
            <div><img src="assets/icons/save.svg"></div>
            <p>{{ 'coa.save' | translate }}</p>
        </button>
      <button class="closebutton" (click)="closeWindow()"><img src="assets/icons/closewhite.svg"></button>
  </div> 

  <div class="wappenHelp" *ngIf="showHelp">
        <img (click)="closeHelp()" src="assets/icons/close.svg">
      <h2>{{ 'coa.helpTitle' | translate }}</h2>
      <p>{{ 'coa.helpText' | translate }}</p>
  </div> 
  <div  *ngIf="showHelp" (click)="closeHelp()" class="wappenHelpOut"></div> 
      
  <h1>{{ 'coa.title' | translate }}<br/>{{user.name}}</h1>

  <div class="wappen">
      <div class="wappen_weapon {{setColorPrimary}}dark {{setWeapon}}">
          <!--<img *ngIf="setWeapon != ''" class="" src="assets/icons/Wappen/{{setWeapon}}.png" />-->
      </div>
      <div *ngIf="setHelmet != ''" class="wappen_helmet {{setColorSecondary}} {{setHelmet}}">
          <!--<img *ngIf="setHelmet != ''" class="{{setColorSecondary}}" src="assets/icons/Wappen/{{setHelmet}}.png" />
          <img *ngIf="setHelmet != ''" class="{{setColorPrimary}}dark" src="assets/icons/Wappen/{{setHelmet}}_outline.png" />-->
      </div> 
      <div *ngIf="setHelmet != ''" class="wappen_helmet outline {{setColorPrimary}}dark {{setHelmet}}">

      </div>
      <div *ngIf="setShield != ''" class="wappen_shield {{setColorPrimary}} {{setShield}}">
            <svg width="106.77mm" height="109.95mm" version="1.1" viewBox="0 0 106.77373 109.94927" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
                <metadata>
                </metadata>
                <g transform="translate(432.58 28.779)">
                <g transform="matrix(.26458 0 0 .26458 -425.1 -23.779)">
                <g clip-rule="evenodd">
                <path  class="svgPrimary" d="m173.52 377.76h-0.24c-0.117-0.378-0.214-0.764-0.354-1.134-4.825-12.722-12.835-23.022-23.706-31.142-9.25-6.909-19.584-11.704-30.409-15.53-12.718-4.496-25.826-7.566-38.958-10.521-9.489-2.135-18.862-4.587-27.75-8.646-13.006-5.941-24.264-14.146-33.19-25.412-5.134-6.479-8.895-13.715-12.046-21.321-2.797-6.75-4.955-13.665-6.014-20.903-0.329-2.244-0.571-4.5-0.853-6.751v-10.32c0.083-0.503 0.181-1.005 0.246-1.511 0.375-2.933 0.635-5.884 1.133-8.795 1.802-10.538 5.154-20.627 9.391-30.399 4.878-11.252 10.056-22.375 15.055-33.575 5.382-12.06 10.072-24.346 12.767-37.345 2.642-12.745 1.676-25.093-3.195-37.168-3.705-9.182-8.868-17.524-14.487-25.612-2.597-3.739-5.255-7.436-7.919-11.199 8.293-9.406 16.562-18.785 24.845-28.179 0.292 0.128 0.513 0.216 0.725 0.32 19.813 9.719 40.851 13.241 62.741 12.247 17.098-0.777 33.548-4.484 49.225-11.427 8.104-3.588 15.752-7.97 22.752-13.438h0.24c2.415 1.705 4.756 3.53 7.258 5.097 24.336 15.229 51.032 21.072 79.474 19.727 13.758-0.651 27.095-3.445 39.907-8.564 2.961-1.183 5.85-2.548 8.861-3.869 8.244 9.35 16.513 18.727 24.812 28.139-1.124 1.565-2.195 3.055-3.264 4.546-6.06 8.451-11.979 16.987-16.576 26.36-6.636 13.53-9.011 27.596-5.889 42.512 2.214 10.572 5.492 20.785 9.791 30.657 4.961 11.392 10.2 22.662 15.266 34.009 4.534 10.159 8.543 20.509 11.094 31.374 2.764 11.776 3.452 23.627 1.312 35.583-1.333 7.444-3.92 14.468-6.873 21.405-4.78 11.233-11.655 20.917-20.797 28.983-12.069 10.65-26.191 17.351-41.679 21.282-10.882 2.762-21.856 5.158-32.722 7.979-11.664 3.028-23.026 6.953-33.722 12.614-10.928 5.785-20.472 13.214-27.689 23.385-3.627 5.111-6.557 10.59-8.563 16.542z" fill-rule="evenodd"/>
                </g>
                </g>
                <g transform="matrix(.26458 0 0 .26458 -425.03 -23.779)">
                <g clip-rule="evenodd">
                <path class="svgPrimaryDark" d="m173.52 0c5.791 4.588 12.09 8.367 18.727 11.577 19.925 9.636 41.021 13.874 63.086 13.458 17.848-0.336 34.99-3.891 51.203-11.53 0.789-0.373 1.576-0.751 2.421-1.154 8.289 9.399 16.535 18.752 24.835 28.163-0.294 0.423-0.557 0.815-0.832 1.198-5.952 8.277-11.95 16.525-16.819 25.515-4.588 8.468-7.977 17.337-9.105 26.981-0.896 7.655 0.05 15.159 1.676 22.618 2.783 12.766 7.663 24.79 12.979 36.661 5.127 11.452 10.398 22.843 15.316 34.384 4.192 9.841 7.288 20.053 8.857 30.682 2.355 15.96 0.214 31.278-6.177 46.093-3.378 7.829-7.3 15.283-12.732 21.893-8.806 10.711-19.757 18.55-32.31 24.285-9.189 4.199-18.9 6.647-28.703 8.854-12.791 2.879-25.548 5.901-37.936 10.273-10.756 3.796-21.026 8.548-30.237 15.381-10.971 8.139-19.048 18.49-23.909 31.296-0.14 0.368-0.227 0.756-0.339 1.135h-0.24c-0.109-0.379-0.192-0.769-0.332-1.136-4.188-11.034-10.802-20.357-19.779-28.009-9.189-7.832-19.765-13.214-30.979-17.449-13.086-4.942-26.654-8.181-40.257-11.282-9.007-2.053-18-4.123-26.566-7.705-14.31-5.982-26.7-14.549-36.41-26.781-5.142-6.479-8.904-13.718-12.06-21.325-2.816-6.79-4.985-13.748-6.038-21.033-0.33-2.287-0.575-4.586-0.859-6.88v-9.84c0.088-0.586 0.188-1.171 0.264-1.76 0.37-2.893 0.627-5.805 1.117-8.678 1.898-11.143 5.555-21.76 10.055-32.076 5-11.462 10.308-22.791 15.379-34.223 5.016-11.308 9.339-22.859 11.756-35.048 1.465-7.386 2.076-14.791 0.945-22.289-1.377-9.138-4.742-17.554-9.155-25.6-4.626-8.433-10.23-16.222-15.831-24.013-0.508-0.707-1.005-1.422-1.484-2.099 0.098-0.156 0.132-0.231 0.184-0.29 8.01-9.09 16.03-18.171 24.014-27.283 0.589-0.672 1.027-0.481 1.635-0.179 6.785 3.377 13.865 5.976 21.19 7.902 17.394 4.575 35.014 5.463 52.819 3.177 15.114-1.941 29.552-6.15 43.174-13.03 6.074-3.07 11.88-6.582 17.216-10.834h0.241zm0.081 352.59c0.047-0.061 0.247-0.307 0.435-0.563 3.442-4.703 7.446-8.893 11.921-12.603 10.771-8.933 22.927-15.382 36.102-20.011 13.613-4.783 27.615-8.116 41.669-11.233 11.417-2.532 22.436-6.03 32.738-11.691 9.116-5.01 16.759-11.675 23.08-19.867 3.551-4.601 6.162-9.765 8.428-15.108 2.535-5.982 5.069-11.951 5.991-18.463 1.516-10.697 1.092-21.313-1.543-31.78-2.602-10.339-6.761-20.128-11.108-29.828-4.036-9.005-8.213-17.948-12.239-26.958-4.392-9.825-8.15-19.883-10.688-30.364-1.466-6.055-2.854-12.126-3.455-18.348-1.021-10.576 1.309-20.661 4.564-30.58 2.768-8.431 7.172-16.066 11.982-23.468 2.264-3.482 4.658-6.879 7.007-10.333-0.079-0.12-0.151-0.265-0.255-0.383-3.986-4.529-7.965-9.065-11.992-13.557-0.233-0.26-0.927-0.313-1.32-0.191-5.015 1.563-9.963 3.36-15.026 4.735-10.439 2.835-21.071 4.579-31.905 4.977-13.952 0.512-27.661-1.091-41.242-4.308-15.171-3.594-29.547-8.998-42.606-17.635-0.497-0.329-0.839-0.362-1.371-0.017-5.727 3.719-11.714 6.954-17.991 9.659-13.092 5.642-26.81 9.018-40.86 11.04-13.337 1.919-26.718 1.885-40.045-0.201-10.931-1.71-21.667-4.246-31.985-8.334-0.689-0.273-1.052-0.136-1.506 0.383-2.709 3.098-5.453 6.166-8.178 9.25-1.319 1.493-2.622 3-3.882 4.444 2.93 4.411 5.875 8.687 8.658 13.065 5.851 9.204 10.469 18.941 12.883 29.664 1.455 6.462 2.625 12.933 2.16 19.582-0.728 10.38-3.3 20.39-6.368 30.276-3.795 12.229-9.271 23.776-14.552 35.402-3.389 7.461-6.827 14.905-9.98 22.466-3.9 9.35-7.328 18.861-8.496 29.036-0.974 8.482-1.012 16.95 0.786 25.306 1.738 8.071 5.167 15.552 8.988 22.825 5.187 9.872 12.75 17.668 21.897 23.879 9.687 6.578 20.425 10.9 31.765 13.708 10.612 2.628 21.292 4.989 31.866 7.756 13.083 3.424 25.845 7.788 37.626 14.596 6.693 3.868 13.069 8.222 18.616 13.635 3.274 3.2 6.255 6.706 9.431 10.14z" fill="#f30000" fill-rule="evenodd"/>
                </g>
                </g>
                </g>
                </svg>
          <!--<img *ngIf="setShield != ''" class="{{setColorPrimary}}" src="assets/icons/Wappen/{{setShield}}.png" />
          <img *ngIf="setShield != ''" class="{{setColorPrimary}}dark" src="assets/icons/Wappen/{{setShield}}_outline.png" />-->
      </div> 
      <div *ngIf="setShield != ''" class="wappen_shield outline {{setColorPrimary}}dark {{setShield}}">

      </div>
      <div *ngIf="setEmblem != ''" class="wappen_emblem {{setColorSecondary}} {{setEmblem}}">
          <!--<img *ngIf="setEmblem != ''" class="{{setColorSecondary}}" src="assets/icons/Wappen/{{setEmblem}}.png" />
          <img *ngIf="setEmblem != ''" class="{{setColorPrimary}}dark" src="assets/icons/Wappen/{{setEmblem}}_outline.png" />-->
      </div>
      <div *ngIf="setEmblem != ''" class="wappen_emblem outline {{setColorPrimary}}dark {{setEmblem}}"></div>
  </div>

  <div class="wappenSettings" *ngIf="showSettings">

      <div class="wappenSettings_shield" *ngIf="settingsContent == 'shield'">
          <img (click)="closeWappenSettings()" src="assets/icons/close.svg">
          <h2>{{ 'coa.shield' | translate }}</h2>
          <ul class="options">
              <ng-container *ngFor="let item of itemsList">
                  <li *ngIf="item.coaTypeId === 1" [className]="selectedShield == item.image ? setShield == item.image ? 'selected used ' + item.image : 'selected ' + item.image : setShield == item.image ? 'used ' + item.image : item.image">
                      <button [className]="isUnlocked(item.image) ? 'unlocked': 'locked'" (click)="selectShield(item.image)"></button><div class="locker"></div>
                  </li>
              </ng-container>
          </ul>
          <ul class="tasks">
              <ng-container *ngFor="let item of itemsList">
                  <li *ngIf="item.coaTypeId === 1 && selectedShield == item.image" [className]="isUnlocked(item.image) ? 'item.image done' : 'item.image locked'">
                    <p *ngIf="languageService.getCurrentLanguageAsString() === 'en'">{{item.taskENG}}</p>
                    <p *ngIf="languageService.getCurrentLanguageAsString() === 'de'">{{item.taskGER}}</p>
                </li>
              </ng-container>
          </ul>
      </div>

      <div class="wappenSettings_emblem" *ngIf="settingsContent == 'emblem'">
          <img (click)="closeWappenSettings()" src="assets/icons/close.svg">
          <h2>{{ 'coa.charge' | translate }}</h2>
          <div class="overflowWrapper">
              <ul class="options">
                  <ng-container *ngFor="let item of itemsList">
                      <li *ngIf="item.coaTypeId === 2" [className]="selectedEmblem == item.image ? setEmblem == item.image ? 'selected used ' + item.image : 'selected ' + item.image : setEmblem == item.image ? 'used ' + item.image : item.image">
                          <button [className]="isUnlocked(item.image) ? 'unlocked' : 'locked'" (click)="selectEmblem(item.image)"></button><div class="locker"></div>
                      </li>
                  </ng-container> 
              </ul>
          </div>
          <ul class="tasks">
              <ng-container *ngFor="let item of itemsList">
                  <li *ngIf="item.coaTypeId === 2 && selectedEmblem == item.image" [className]="isUnlocked(item.image) ? 'item.image done' : 'item.image locked'">
                    <p *ngIf="languageService.getCurrentLanguageAsString() === 'en'">{{item.taskENG}}</p>
                    <p *ngIf="languageService.getCurrentLanguageAsString() === 'de'">{{item.taskGER}}</p>
                </li>
              </ng-container>
          </ul>
      </div>
      <div class="wappenSettings_helmet" *ngIf="settingsContent == 'helmet'">
          <img (click)="closeWappenSettings()" src="assets/icons/close.svg">
          <h2>{{ 'coa.helmet' | translate }}</h2>
          <ul class="options">
              <ng-container *ngFor="let item of itemsList">
                  <li *ngIf="item.coaTypeId === 3" [className]="selectedHelmet == item.image ? setHelmet == item.image ? 'selected used ' + item.image : 'selected ' + item.image : setHelmet == item.image ? 'used ' + item.image : item.image">
                      <button [className]="isUnlocked(item.image) ? 'unlocked' : 'locked'" (click)="selectHelmet(item.image)"></button>
                      <div class="locker"></div>
                  </li>
              </ng-container> 
          </ul>
          <ul class="tasks">
              <ng-container *ngFor="let item of itemsList">
                  <li *ngIf="item.coaTypeId === 3 && selectedHelmet == item.image" [className]="isUnlocked(item.image) ? 'item.image done' : 'item.image locked'">
                    <p *ngIf="languageService.getCurrentLanguageAsString() === 'en'">{{item.taskENG}}</p>
                    <p *ngIf="languageService.getCurrentLanguageAsString() === 'de'">{{item.taskGER}}</p>
                </li>
              </ng-container>
          </ul>
      </div>
      <div class="wappenSettings_weapon" *ngIf="settingsContent == 'weapon'">
          <img (click)="closeWappenSettings()" src="assets/icons/close.svg">
          <h2>{{ 'coa.mantle' | translate }}</h2>
          <ul class="options">
              <ng-container *ngFor="let item of itemsList">
                  <li *ngIf="item.coaTypeId === 4" [className]="selectedWeapon == item.image ? setWeapon == item.image ? 'selected used ' + item.image : 'selected ' + item.image : setWeapon == item.image ? 'used ' + item.image : item.image">
                      <button [className]="isUnlocked(item.image) ? 'unlocked' : 'locked'" (click)="selectWeapon(item.image)"></button>
                      <div class="locker"></div>
                  </li>
              </ng-container> 
          </ul>
          <ul class="tasks">
              <ng-container *ngFor="let item of itemsList">
                  <li *ngIf="item.coaTypeId === 4 && selectedWeapon == item.image" [className]="isUnlocked(item.image) ? 'item.image done' : 'item.image locked'">
                        <p *ngIf="languageService.getCurrentLanguageAsString() === 'en'">{{item.taskENG}}</p>
                        <p *ngIf="languageService.getCurrentLanguageAsString() === 'de'">{{item.taskGER}}</p>
                    </li>
              </ng-container>
          </ul>
      </div>
      <div class="wappenSettings_color" *ngIf="settingsContent == 'color'">
          <img (click)="closeWappenSettings()" src="assets/icons/close.svg">
          <h2>{{ 'coa.colors' | translate }}</h2>
          <p>{{ 'coa.primColor' | translate }}</p>
          <ul class="primary">
              <li [className]="setColorPrimary == 'Color1' ? 'selected Color1' : 'Color1'"><button (click)="selectPrimaryColor('Color1')"></button></li>
              <li [className]="setColorPrimary == 'Color2' ? 'selected Color2' : 'Color2'"><button (click)="selectPrimaryColor('Color2')"></button></li>
              <li [className]="setColorPrimary == 'Color3' ? 'selected Color3' : 'Color3'"><button (click)="selectPrimaryColor('Color3')"></button></li>
              <li [className]="setColorPrimary == 'Color4' ? 'selected Color4' : 'Color4'"><button (click)="selectPrimaryColor('Color4')"></button></li>
              <li [className]="setColorPrimary == 'Color5' ? 'selected Color5' : 'Color5'"><button (click)="selectPrimaryColor('Color5')"></button></li>
          </ul>
          <p>{{ 'coa.secColor' | translate }}</p>
          <ul class="secondary">
              <li [className]="setColorSecondary == 'Color1' ? 'selected Color1' : 'Color1'"><button (click)="selectSecondaryColor('Color1')"></button></li>
              <li [className]="setColorSecondary == 'Color2' ? 'selected Color2' : 'Color2'"><button (click)="selectSecondaryColor('Color2')"></button></li>
              <li [className]="setColorSecondary == 'Color3' ? 'selected Color3' : 'Color3'"><button (click)="selectSecondaryColor('Color3')"></button></li>
              <li [className]="setColorSecondary == 'Color4' ? 'selected Color4' : 'Color4'"><button (click)="selectSecondaryColor('Color4')"></button></li>
              <li [className]="setColorSecondary == 'Color5' ? 'selected Color5' : 'Color5'"><button (click)="selectSecondaryColor('Color5')"></button></li>
          </ul></div>
  </div>

  <div class="wappenSettingsNav">
      <ul>
          <li [className]="showSettings && settingsContent == 'shield' ? 'selected wappenSettingsNav_shield' : 'wappenSettingsNav_shield'"><button (click)="displaySettings('shield')"></button></li>
          <li [className]="showSettings && settingsContent == 'emblem' ? 'selected wappenSettingsNav_emblem' : 'wappenSettingsNav_emblem'"><button (click)="displaySettings('emblem')"></button></li>
          <li [className]="showSettings && settingsContent == 'helmet' ? 'selected wappenSettingsNav_helmet' : 'wappenSettingsNav_helmet'"><button (click)="displaySettings('helmet')"></button></li>
          <li [className]="showSettings && settingsContent == 'weapon' ? 'selected wappenSettingsNav_weapon' : 'wappenSettingsNav_weapon'"><button (click)="displaySettings('weapon')"></button></li>
          <li [className]="showSettings && settingsContent == 'color' ? 'selected wappenSettingsNav_color' : 'wappenSettingsNav_color'"><button (click)="displaySettings('color')"></button></li>
      </ul>
  </div>
  <div  *ngIf="showSettings" (click)="closeWappenSettings()" class="wappenSettingsNavOut"></div> 
</div>
